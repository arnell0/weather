(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),r=a(10),n=a.n(r),i=a(3),o=a(0),d=a.n(o),l=a(9),u=(a(18),a.p+"static/media/search.7323df73.svg"),j=a(1);function m(e){var t=Object(c.useState)(""),a=Object(i.a)(t,2),s=a[0],r=a[1],n=Object(c.useState)(""),o=Object(i.a)(n,2),m=o[0],p=o[1],b=Object(c.useState)([]),h=Object(i.a)(b,2),f=h[0],v=h[1],O=Object(c.useState)(-1),x=Object(i.a)(O,2),_=x[0],y=x[1];return Object(j.jsxs)("div",{className:"SearchBar",children:[Object(j.jsx)("form",{className:"SearchBar__form",onSubmit:function(t){t.preventDefault(),r(""),p(""),v([]),y(-1),e.onSubmit(s)},children:Object(j.jsx)("input",{autoFocus:!0,className:"SearchBar__input",type:"text",placeholder:"Type a city ...",value:s,onChange:function(e){return C.apply(this,arguments)},onKeyDown:function(e){var t=e.key;"ArrowDown"===t&&_<f.length-1?(y(_+1),r(f[_+1]),-1===_&&p(e.target.value)):"ArrowUp"===t&&_>0?(y(_-1),r(f[_-1])):"ArrowUp"===t&&_>-1&&(y(_-1),r(m));"ArrowUp"===t&&e.preventDefault()}})}),Object(j.jsx)("div",{className:"autoComplete",children:f&&f.map((function(e,t){return Object(j.jsx)("div",{className:"autoComplete__item ".concat(_===t?"autoComplete__item--active":""),children:e},t)}))}),Object(j.jsx)("img",{src:u,className:"SearchIcon",alt:"",srcset:""})]});function N(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(d.a.mark((function t(a){var c,s,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.supabase.from("CitiesWorld").select("name").ilike("name","".concat(a,"%"));case 2:return c=t.sent,s=c.data,(r=c.error)&&console.log(r),t.abrupt("return",s.map((function(e){return e.name})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(l.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.value,r(a),t.target.setSelectionRange(a.length,a.length),!a){e.next=10;break}return e.next=6,N(a);case 6:c=e.sent,v(c.slice(0,5)),e.next=11;break;case 10:v([]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}var p=a(6),b=(a(20),a.p+"static/media/map-pin.8c41fcd3.svg"),h=a.p+"static/media/sun.ed23b430.svg",f=a.p+"static/media/wind.d2a4a1fe.svg",v=a.p+"static/media/droplet.49d3b134.svg",O=a.p+"static/media/cloud.6320a388.svg",x=a.p+"static/media/moon.a82cae44.svg";function _(e){var t=e.data,a=t.meta,c=t.data,s={data:Object(p.a)(c)[0],condition:r(Object(p.a)(c)[0])};return Object(j.jsxs)("div",{className:"CityCard",style:{backgroundColor:s.condition.color},children:[Object(j.jsxs)("div",{className:"CityCard__header",onClick:e.onClose,children:[Object(j.jsx)("img",{src:b,alt:"",srcset:""})," \xa0 ",Object(j.jsxs)("span",{style:{textDecoration:"underline"},children:[a.city,", ",a.country]})]}),Object(j.jsxs)("div",{className:"CityCard__today",children:[Object(j.jsx)("img",{className:"today__icon",src:s.condition.icon,alt:"",srcset:""}),Object(j.jsx)("div",{className:"today__desc",children:s.condition.desc}),Object(j.jsxs)("div",{className:"today__temp",children:[s.data.airTemperature," \xb0C"]}),Object(j.jsxs)("div",{className:"today__extra",children:[Object(j.jsxs)("div",{className:"today__extra--img",children:[Object(j.jsx)("img",{src:f,alt:"",srcset:""}),"\xa0",s.data.windSpeed,"ms"]}),Object(j.jsxs)("div",{className:"today__extra--img",children:[Object(j.jsx)("img",{src:v,alt:"",srcset:""}),"\xa0",s.data.relativeHumidity,"%"]})]})]}),Object(j.jsxs)("div",{className:"CityCard__forecast",children:[Object(j.jsx)("div",{className:"forecast__item--header",children:function(e){var t=new Date(e);return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][t.getDay()]}(s.data.date)}),Object(j.jsx)("div",{className:"CityCard__forecast--scroll",children:function(e){var t=e.split("T")[0],a=[];return c.filter((function(e){return e.date.split("T")[0]===t})).forEach((function(e){a.push(e)})),a}(s.data.date).map((function(e,t){var a=r(e);return Object(j.jsx)("div",{className:"forecast__item",children:Object(j.jsxs)("div",{className:"forecast__item--card",children:[Object(j.jsx)("div",{className:"forecast__item--time",children:e.date.split("T")[1].split(":00Z")[0]}),Object(j.jsx)("img",{className:"forecast__item--icon",src:a.icon,alt:"",srcset:""}),Object(j.jsxs)("div",{className:"forecast__item--temp",children:[e.airTemperature," \xb0C"]})]})},t)}))})]})]});function r(e){var t=e.airTemperature,a=e.totalCloudCover,c=e.date,s=parseInt(c.split("T")[1].split(":00:00Z")[0]),r=s>21||s<4,n={icon:"",color:"",desc:""};return a<50?(n.icon=h,n.desc="Sunny"):a>50&&(n.icon=O,n.desc="Cloudy"),t>15?n.color="#f3b07c":t<15&&(n.color="#4BE2E3"),r&&(n.icon=x,n.color="#282c34",n.desc="Night"),n}}a(21);var y=a(12);function N(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(),n=Object(i.a)(r,2),o=n[0],d=n[1],l=Object(y.a)("https://wfapkikzcykkjzxihggu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNTEyNjkxNSwiZXhwIjoxOTMwNzAyOTE1fQ.JvQKP-6-lXM1Czse92w8LsQi6yd-eI1PkZbc90FM9rs");return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("div",{className:"App__search ".concat(a?"App__search--active":""),children:Object(j.jsx)(m,{supabase:l,onSubmit:function(e){s(!0),function(e){var t="https://api.therainery.com/forecast/weather?city=".concat(e);fetch(t,{method:"GET",headers:{"x-api-key":"fzsdZcfoX960LtVFNBkc26qdpohxk4kh3VZvV8T8"}}).then((function(e){return e.json()})).then((function(e){d(e),console.log(e.meta.requestsRemaining)})).catch((function(e){console.error(e)}))}(e)},active:a})}),Object(j.jsx)("div",{className:"App__cities ".concat(a?"App__cities--active":""),children:o&&Object(j.jsx)(_,{onClose:function(){return s(!1)},data:o})})]})}n.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.4d1bbf51.chunk.js.map